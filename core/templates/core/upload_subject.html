{% extends "core/base.html" %}

{% load crispy_forms_tags %}




{% block content %}



<br>
<br>
<br>

  <h2>Upload subject</h2>
  <form method="post" enctype="multipart/form-data" >
    {% csrf_token %}
    <!--{{ form|crispy }}-->
     {{ form.year_level|as_crispy_field }}
     <div class="form-row">
      <div class="form-group col-md-6 mb-0">
        {{ form.subject_code|as_crispy_field }}
      </div>
      <div class="form-group col-md-6 mb-0">
        {{ form.subject_description|as_crispy_field }}
      </div>
    </div>
    <div class="form-row">
      <div class="form-group col-md-6 mb-0">
        {{ form.lesson_number|as_crispy_field }}
      </div>
      <div class="form-group col-md-6 mb-0">
        {{ form.lesson_name|as_crispy_field }}
      </div>
      <div class="form-group col-md-6 mb-0">
        {{ form.subject_type|as_crispy_field }}
      </div>
    </div>
    {{ form.cover|as_crispy_field }}
    {{ form.file|as_crispy_field }}
    <button type="submit" class="btn btn-primary">Upload subject</button>
  </form>
<!--<h2>JSON</h2>-->
<!--<input class="form-control" id="id_subject_code3" value="jQuery" />-->

{% endblock content %}
{% block js %}

{% load static %}
<link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.5.2/flatly/bootstrap.min.css">

<link rel="stylesheet" type="text/css" href="{% static 'miika/css/jquery.inputpicker.css' %}?v3" >
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

<script src="{% static 'miika/js/jquery.inputpicker.js' %}?v3"></script>
<script type="text/javascript">
//alert("oppkss");

$('#id_subject_code').inputpicker({
    url:'http://127.0.0.1:8000/core/api/lookup/?format=json&lookup_type=2',
    <!--fields:['id','name','description','value'],-->
    fields:['name','description'],
    fieldText:'name',
    fieldValue:'value',
    headShow: true,
});

$('#id_subject_code').change(function(input){
 var selected_row = $('#id_subject_code').inputpicker('data_highlighted');
 console.log(selected_row);
	//alert(selected_row.description);
	$('#id_subject_description').val(selected_row.description)
	//alert("oopsw");
 });

 <!--$('#id_subject_code').on('change_highlight.inputpicker',function(input){-->
  <!--alert("oops2");-->
<!--});-->


</script>




{% endblock js %}




